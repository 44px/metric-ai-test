(this["webpackJsonpmetric-ai-test"]=this["webpackJsonpmetric-ai-test"]||[]).push([[0],{225:function(e,t,a){e.exports=a(428)},230:function(e,t,a){},414:function(e,t,a){},422:function(e,t,a){},423:function(e,t,a){},424:function(e,t,a){},428:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(45),o=a.n(c),i=a(84),l=a(17),s=(a(230),a(20)),u=a(177),m=a(430),d=a(431),p=a(26),v=a(114),f=a(178),y=a(39),b=a(118),E=function(e,t){var a={},n=t.account,r=t.amount;if("BALANCE_ADJUSTMENT"===t.type)a=Object(y.a)({},n,r);else if("INCOME"===t.type||"EXPENSE"===t.type)a=Object(y.a)({},n,h(e.accounts[n],r));else if("TRANSFER"===t.type){var c,o=t.destinationAccount,i=t.destinationAmount;c={},Object(y.a)(c,n,h(e.accounts[n],r)),Object(y.a)(c,o,h(e.accounts[o],i)),a=c}var l=Object(f.a)({},e.accounts,{},a),s=Object.values(l).reduce(h,0);return{date:Date.parse(t.date),accounts:l,total:s}},h=function(e,t){return(100*e+100*t)/100},g=a(31),D=(a(414),function(e){var t=e.data;return r.a.createElement(g.e,{className:"Chart",width:"100%",aspect:1.8},r.a.createElement(g.c,{margin:{top:8,left:4,right:16,bottom:8},data:t},r.a.createElement(g.b,{type:"linear",dataKey:"total"}),r.a.createElement(g.a,{stroke:"#ccc",strokeDasharray:"5 5"}),r.a.createElement(g.f,{labelFormatter:O,formatter:function(e){return _(e,2)}}),r.a.createElement(g.g,{dataKey:"date",type:"number",scale:"time",domain:["dataMin","dataMax"],tickFormatter:O,minTickGap:16,tickMargin:4,interval:"preserveStartEnd"}),r.a.createElement(g.h,{type:"number",scale:"linear",domain:[0,"dataMax + 1000"],interval:"preserveStartEnd",tickFormatter:_}),r.a.createElement(g.d,{y:0})))}),O=function(e){return new Date(e).toLocaleDateString()},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t})},j=a(429),A=a(117),N=a(190),k=a.n(N),M=(a(421),a(422),function(e){var t=e.value,a=e.onChange,n=new Date;return r.a.createElement(k.a,{value:t,format:"yyyy-MM-dd",parseDate:w,formatDate:S,placeholder:"".concat(Object(m.a)(n,"yyyy-MM-dd")),dayPickerProps:{disabledDays:{after:n}},onDayChange:function(e){A.DateUtils.isDate(e)&&a("".concat(Object(m.a)(e,"yyyy-MM-dd")))}})}),w=function(e,t){var a=Object(j.a)(e,t,new Date);return A.DateUtils.isDate(a)?a:void 0},S=function(e,t){return Object(m.a)(e,t)},C=(a(423),function(e){var t=e.children,a=e.onClick;return r.a.createElement("button",{className:"Button",type:"button",onClick:a},t)});a(424);function F(){var e=Object(u.a)(["\n  query GetTransactions($fromDate: String!) {\n    transactions(fromDate: $fromDate) {\n      date\n      type\n      account\n      amount\n      destinationAccount\n      destinationAmount\n    }\n  }\n"]);return F=function(){return e},e}var T=Object(i.b)(F()),x=Object(m.a)(Object(d.a)(new Date,7),"yyyy-MM-dd");var L=function(){var e=Object(n.useState)(x),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(v.a)(T,{variables:{fromDate:a},notifyOnNetworkStatusChange:!0}),i=o.loading,l=o.error,u=o.data,m=o.refetch,d=o.networkStatus,f=function(e){if(0===e.length)return[];var t={date:Date.parse(e[0].date),total:0,accounts:{}};return e.reduce((function(e,t){var a=e[e.length-1],n=E(a,t);return n.date!==a.date?[].concat(Object(b.a)(e),[n]):[].concat(Object(b.a)(e.slice(0,e.length-1)),[n])}),[t])}((null===u||void 0===u?void 0:u.transactions)||[]),y=i||d===p.b.refetch;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App__toolbar"},r.a.createElement("div",{className:"App__toolbar-element"},r.a.createElement("span",{className:"App__toolbar-label"},"Show balance from date:"),r.a.createElement(M,{value:a,onChange:c})),r.a.createElement("div",{className:"App__toolbar-element"},r.a.createElement(C,{onClick:function(){return m()}},"Refresh"))),r.a.createElement("div",{className:"App__view"},y&&r.a.createElement("div",{className:"App__overlay"},r.a.createElement("div",{className:"App__overlay-title"},"Loading"),r.a.createElement("div",{className:"App__loader"},"\xa0")),l&&r.a.createElement("div",{className:"App__overlay"},r.a.createElement("div",{className:"App__overlay-title"},"Error"),r.a.createElement("span",null,l.message)),r.a.createElement(D,{data:f})))},B=new i.a({uri:"https://cash.sergees.com/graphql"});o.a.render(r.a.createElement(l.a,{client:B},r.a.createElement(L,null)),document.getElementById("root"))}},[[225,1,2]]]);
//# sourceMappingURL=main.7638f049.chunk.js.map